<div class="container">
    <div class="row p-3 rounded" style="background-color: dodgerblue;">
        <div class="col-md-12">
            <input class="form-control" type="text" placeholder="Ruta: {{route}}" readonly>
        </div>
    </div>


    <div class="row m-3">
        <div class="col">
            <form action="/" method="POST">
                <input type="hidden" name="action" value="back">
                <button type="submit" class="btn btn-success btn-sm">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-left" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z" />
                    </svg> Return
                </button>
            </form>
        </div>

        <div class="col">
            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#exampleModal">Create
                File</button>

            <!-- MODAL CREATE FILE -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Create File</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="/" method="POST">
                                <input type="hidden" name="action" value="create_file">
                                <div class="form-group">
                                    <label for="recipient-name" class="col-form-label">Name File</label>
                                    <input type="text" class="form-control" id="recipient-name" name="nameObject">
                                </div>
                                <button type="submit" class="btn btn-primary">Accept</button>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col">
            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
                data-target="#createFolderModal">Create
                Folder</button>

            <!-- MODAL CREATE Folder -->
            <div class="modal fade" id="createFolderModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Create Folder</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="/" method="POST">
                                <input type="hidden" name="action" value="create_folder">
                                <div class="form-group">
                                    <label for="recipient-name" class="col-form-label">Name Folder</label>
                                    <input type="text" class="form-control" id="recipient-name" name="nameObject">
                                </div>
                                <button type="submit" class="btn btn-primary">Accept</button>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        {{#each files_folders}}
        <div class="col-md-4 my-3">
            <div class="card rounded shadow-sm" style="background-color: khaki;">
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">user perm: {{usr_perm}}</li>
                        <li class="list-group-item">grop_perm: {{group_perm}}</li>
                        <li class="list-group-item">other perm: {{other_perm}}</li>
                        <li class="list-group-item">current Owner: {{usr}}</li>
                        <li class="list-group-item">group: {{group}}</li>
                    </ul>
                </div>
                <div class="card-body">
                    <h4 class="card-title text-truncate align-items-center">
                        {{#if folder}}
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-folder" fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9.828 4a3 3 0 0 1-2.12-.879l-.83-.828A1 1 0 0 0 6.173 2H2.5a1 1 0 0 0-1 .981L1.546 4h-1L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3v1z" />
                            <path fill-rule="evenodd"
                                d="M13.81 4H2.19a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zM2.19 3A2 2 0 0 0 .198 5.181l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H2.19z" />
                        </svg>
                        {{else}}
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark" fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M4 0h5.5v1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h1V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z" />
                            <path d="M9.5 3V0L14 4.5h-3A1.5 1.5 0 0 1 9.5 3z" />
                        </svg>
                        {{/if}}{{ name }}
                    </h4>
                    {{#if folder}}
                    <div class="d-flex col-3 m-1">
                        <form action="/" method="POST">
                            <input type="hidden" name="action" value="enter">
                            <input type="hidden" name="folder" value="{{name}}">
                            <button type="submit" class="btn btn-success btn-sm">Enter</button>
                        </form>
                    </div>
                    {{/if}}
                    <div class="d-flex col-3 m-1">
                        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal"
                            data-target="#renameModal{{index}}">Rename</button>
                    </div>
                    <div class="d-flex col-3 m-1">
                        <form action="/" method="POST">
                            <input type="hidden" name="action" value="delete">
                            <input type="hidden" name="nameObject" value="{{name}}">
                            <input type="hidden" name="typeObject" value="{{type}}">
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        </form>
                    </div>
                    <div class="d-flex col-3 m-1">
                        <button type="button" class="btn btn-warning btn-sm" data-toggle="modal"
                            data-target="#permissions_modal{{index}}">
                            Permissions
                        </button>
                    </div>

                    <div class="d-flex col-3 m-1">
                        <button type="button" class="btn btn-dark btn-sm" data-toggle="modal"
                            data-target="#copy_modal{{index}}">
                            Copy
                        </button>
                    </div>

                    <div class="d-flex col-3 m-1">
                        <button type="button" class="btn btn-secondary btn-sm" data-toggle="modal"
                            data-target="#move_modal{{index}}">
                            Move
                        </button>
                    </div>

                    <div class="d-flex col-3 m-1">
                        <button type="button" class="btn btn-light " data-toggle="modal"
                            data-target="#owner_modal{{index}}">
                            Change Owner
                        </button>
                    </div>

                    <!-- MODAL MOVE -->
                    <div class="modal fade" id="owner_modal{{index}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Change Owner</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form action="/" method="POST">
                                        <input type="hidden" name="action" value="change_owner">
                                        <div class="form-group">
                                            <label for="recipient-copy" class="col-form-label">Name's Owner: </label>
                                            <input type="hidden" name="name" value="{{name}}">
                                            <input type="text" class="form-control" name="user">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Accept</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MODAL MOVE -->
                    <div class="modal fade" id="move_modal{{index}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Move</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form action="/" method="POST">
                                        <input type="hidden" name="action" value="move">
                                        <div class="form-group">
                                            <label for="recipient-copy" class="col-form-label">Route: </label>
                                            <input type="hidden" name="name" value="{{name}}">
                                            <input type="text" class="form-control" name="destination">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Accept</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MODAL COPY -->
                    <div class="modal fade" id="copy_modal{{index}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Copy</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form action="/" method="POST">
                                        <input type="hidden" name="action" value="copy">
                                        <div class="form-group">
                                            <label for="recipient-copy" class="col-form-label">Route: </label>
                                            <input type="hidden" name="name" value="{{name}}">
                                            <input type="text" class="form-control" name="destination">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Accept</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MODAL RENAME -->
                    <div class="modal fade" id="renameModal{{index}}" tabindex="-1" aria-labelledby="exampleModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Rename</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form action="/" method="POST">
                                        <input type="hidden" name="action" value="rename">
                                        <div class="form-group">
                                            <label for="recipient-name" class="col-form-label">New Name</label>
                                            <input type="hidden" name="currentName" value="{{name}}">
                                            <input type="text" class="form-control" id="recipient-name" name="newName"
                                                value="{{name}}">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Accept</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MODAL PERMISSIONS -->
                    <div class="modal fade" id="permissions_modal{{index}}" tabindex="-1"
                        aria-labelledby="permissions_modalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Permissions</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form action="/" method="POST">
                                    <input type="hidden" name="name" value="{{name}}">
                                        <input type="hidden" name="action" value="change_permission">

                                        <div class="py-2">
                                            <h5>User's Permissions</h5>
                                            <div class="form-check form-check-inline">

                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                                    name="listU" value="4">
                                                <label class="form-check-label" for="inlineCheckbox1">Read</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                                    name="listU" value="2">
                                                <label class="form-check-label" for="inlineCheckbox2">Write</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                                    name="listU" value="1">
                                                <label class="form-check-label" for="inlineCheckbox3">Execute</label>
                                            </div>
                                        </div>

                                        <div class="py-2">
                                            <h5>Group Permissions</h5>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                                    name="listG" value="4">
                                                <label class="form-check-label" for="inlineCheckbox1">Read</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                                    name="listG" value="2">
                                                <label class="form-check-label" for="inlineCheckbox2">Write</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                                    name="listG" value="1">
                                                <label class="form-check-label" for="inlineCheckbox3">Execute</label>
                                            </div>
                                        </div>

                                        <div class="py-2">
                                            <h5>Other Permissions</h5>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                                    name="listO" value="4">
                                                <label class="form-check-label" for="inlineCheckbox1">Read</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                                    name="listO" value="2">
                                                <label class="form-check-label" for="inlineCheckbox2">Write</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                                    name="listO" value="1">
                                                <label class="form-check-label" for="inlineCheckbox3">Execute</label>
                                            </div>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Close</button>
                                            <button type="submit" class="btn btn-primary">Save changes</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        {{else}}
        <div class="col">
            <div class="card m-auto">
                <div class="card-body">
                    <h1 class="text-center">This folder is empty</h1>
                </div>
            </div>
        </div>


        {{/each}}
    </div>
</div>